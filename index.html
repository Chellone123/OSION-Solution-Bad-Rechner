<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bad-Budgetrechner | Powered by OSION Solution XR</title>

  <style>
    :root{
      --osion-red:#b11217;
      --osion-red-dark:#8f0f14;
      --ink:#0b0b0f;
      --muted:#5a5f6a;
      --card:#ffffff;
      --line:#e8e8ee;
      --bg:#f6f7fb;
      --shadow: 0 18px 50px rgba(0,0,0,.10);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color: var(--ink);
      background: radial-gradient(1200px 600px at 30% -10%, rgba(177,18,23,.10), transparent 60%),
                  radial-gradient(1000px 500px at 90% 0%, rgba(143,15,20,.12), transparent 55%),
                  var(--bg);
    }

    .wrap{
      max-width: 1040px;
      margin: 34px auto;
      padding: 0 16px;
    }

    .shell{
      background: var(--card);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .hero{
      height: 180px;
      background-image: url("osion-header.png");
      background-size: cover;
      background-position: center;
      position: relative;
    }

    .hero:after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(0,0,0,.48) 0%, rgba(0,0,0,.12) 45%, rgba(0,0,0,.18) 100%);
      pointer-events:none;
    }

    .hero-inner{
      position:relative;
      height:100%;
      display:flex;
      align-items:flex-end;
      padding: 18px 22px;
      gap: 12px;
      z-index:1;
      color:#fff;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:4px;
      line-height:1.1;
    }

    .brand .kicker{
      font-size:12px;
      letter-spacing:.14em;
      text-transform:uppercase;
      opacity:.9;
    }

    .brand .title{
      font-size:26px;
      font-weight:900;
      letter-spacing:-.02em;
    }

    .content{
      padding: 22px 22px 18px 22px;
    }

    .toprow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex-wrap:wrap;
      margin-bottom: 14px;
    }

    .hint{
      color: var(--muted);
      font-size: 13px;
    }

    .progress{
      width: 280px;
      height: 10px;
      background: #eceef6;
      border-radius: 999px;
      overflow:hidden;
      border: 1px solid rgba(0,0,0,.05);
    }

    .bar{
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #000 0%, var(--osion-red-dark) 55%, var(--osion-red) 100%);
      transition: width .25s ease;
    }

    .question{
      font-size: 16px;
      font-weight: 800;
      margin: 10px 0 14px 0;
      letter-spacing: -.01em;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 14px;
    }
    @media (max-width: 720px){
      .grid{grid-template-columns:1fr}
      .progress{width:100%}
      .hero{height:160px}
    }
    .grid.cols-3{grid-template-columns: repeat(3, minmax(0,1fr))}
    @media (max-width: 900px){
      .grid.cols-3{grid-template-columns:1fr}
    }

    .opt{
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 14px 14px;
      background: #fff;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
      min-height: 78px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap: 6px;
      position:relative;
      user-select:none;
    }
    .opt:hover{
      transform: translateY(-1px);
      border-color: rgba(177,18,23,.55);
      box-shadow: 0 10px 22px rgba(0,0,0,.08);
    }
    .opt.active{
      border-color: var(--osion-red);
      box-shadow: 0 14px 30px rgba(177,18,23,.18);
    }
    .opt .label{
      font-weight: 900;
      letter-spacing: -.01em;
    }
    .opt .sub{
      color: var(--muted);
      font-size: 12px;
      line-height:1.25;
    }

    .nav{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
      margin-top: 16px;
      padding-top: 14px;
      border-top: 1px solid var(--line);
    }

    .btn{
      border:0;
      padding: 11px 14px;
      border-radius: 12px;
      font-weight: 900;
      cursor:pointer;
    }
    .btn.back{
      background: #0f0f14;
      color:#fff;
    }
    .btn.back:disabled{opacity:.35; cursor:not-allowed}

    .result{
      background: #f3f4f8;
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 16px;
    }
    .result h3{margin:0 0 10px 0}
    .rows{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 720px){ .rows{grid-template-columns:1fr} }

    .row{
      background:#fff;
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 10px 12px;
      display:flex;
      justify-content:space-between;
      gap: 10px;
    }
    .total{
      margin-top: 12px;
      font-size: 18px;
      font-weight: 950;
      display:flex;
      justify-content:flex-end;
    }
    .cta{
      margin-top: 12px;
      display:flex;
      justify-content:flex-end;
      gap: 10px;
      flex-wrap:wrap;
    }
    .cta a{
      text-decoration:none;
      display:inline-block;
      padding: 11px 14px;
      border-radius: 12px;
      font-weight: 900;
    }
    .cta .primary{
      background: var(--osion-red);
      color:#fff;
    }
    .cta .ghost{
      background: #0f0f14;
      color:#fff;
    }

    .footer{
      padding: 0 22px 18px 22px;
      color: var(--muted);
      font-size: 12px;
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="shell">
      <div class="hero">
        <div class="hero-inner">
          <div class="brand">
            <div class="kicker">Powered by OSION Solution XR</div>
            <div class="title">Interaktiver Bad-Budgetrechner</div>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="toprow">
          <div class="hint">Unverbindliche Kostenschätzung auf Basis deiner Auswahl.</div>
          <div class="progress" aria-label="Fortschritt">
            <div class="bar" id="bar"></div>
          </div>
        </div>

        <div id="app"></div>

        <div class="nav">
          <button class="btn back" id="backBtn" type="button">Zurück</button>
          <div class="hint" id="stepHint"></div>
        </div>
      </div>

      <div class="footer">
        © OSION Solution XR – Unverbindliche Kostenschätzung. Keine Preisgarantie.
      </div>
    </div>
  </div>

<script>
(() => {
  // Preise: realistische Mittelklasse als Basis, Netto. MwSt. wird am Ende addiert.
  const VAT = 0.19;

  const PRICES = {
    baseByAreaNet: {
      "4-5 qm": 14500,
      "5-7 qm": 17500,
      "7-10 qm": 22000,
      ">10 qm": 27500
    },
    qualityFactor: { "Basic": 0.85, "Komfort": 1.00, "Luxus": 1.28 },
    tubFactor: { "Dusche": 1.00, "Badewanne": 1.06, "Dusche und Badewanne": 1.14 }
  };

  const breakdownWeights = {
    "Demontage / Montage / Installation": 0.34,
    "Malerarbeiten": 0.06,
    "Fliesenarbeiten / Fliesen": 0.22,
    "Elektroarbeiten": 0.08,
    "Ausstattung": 0.30
  };

  const steps = [
    {
      key: "area",
      question: "Wie groß ist Ihr Bad?",
      cols: 2,
      options: [
        { label: "4-5 qm", sub: "Kompaktbad / Standard" },
        { label: "5-7 qm", sub: "Typisches Familienbad" },
        { label: "7-10 qm", sub: "Komfortgröße" },
        { label: ">10 qm", sub: "Großes Bad" }
      ]
    },
    {
      key: "quality",
      question: "Welche Qualitätsstufe wünschen Sie?",
      cols: 3,
      options: [
        { label: "Basic", sub: "Preisbewusst, solide Auswahl" },
        { label: "Komfort", sub: "Mittelklasse, typischer Standard" },
        { label: "Luxus", sub: "Hochwertige Materialien & Ausstattung" }
      ]
    },
    {
      key: "tub",
      question: "Dusche und/oder Badewanne?",
      cols: 3,
      options: [
        { label: "Dusche", sub: "Modern & effizient" },
        { label: "Badewanne", sub: "Entspannung & Komfort" },
        { label: "Dusche und Badewanne", sub: "Maximaler Komfort" }
      ]
    },
    { key: "result" }
  ];

  const state = { area: null, quality: null, tub: null };
  let idx = 0;

  const app = document.getElementById("app");
  const bar = document.getElementById("bar");
  const backBtn = document.getElementById("backBtn");
  const stepHint = document.getElementById("stepHint");

  function formatEUR(v){
    return v.toLocaleString("de-DE", { style:"currency", currency:"EUR" });
  }

  function calcNet(){
    const base = PRICES.baseByAreaNet[state.area] ?? 0;
    const q = PRICES.qualityFactor[state.quality] ?? 1;
    const t = PRICES.tubFactor[state.tub] ?? 1;
    return Math.round(base * q * t);
  }

  function breakdown(net){
    const out = {};
    for (const [k,w] of Object.entries(breakdownWeights)){
      out[k] = Math.round(net * w);
    }
    return out;
  }

  function setProgress(){
    const p = Math.round((idx / (steps.length - 1)) * 100);
    bar.style.width = p + "%";
  }

  function render(){
    setProgress();

    backBtn.disabled = idx === 0;
    stepHint.textContent = idx < steps.length - 1 ? `Schritt ${idx+1} von ${steps.length-1}` : "";

    const s = steps[idx];

    if (s.key === "result"){
      const net = calcNet();
      const vat = Math.round(net * VAT);
      const gross = net + vat;
      const parts = breakdown(net);

      const summary =
        `Bad-Kalkulation (unverbindlich)\n` +
        `Fläche: ${state.area}\n` +
        `Qualität: ${state.quality}\n` +
        `Dusche/Badewanne: ${state.tub}\n\n` +
        `Summe (netto): ${formatEUR(net)}\n` +
        `MwSt.: ${formatEUR(vat)}\n` +
        `Summe (brutto): ${formatEUR(gross)}\n`;

      const mailHref =
        "mailto:?subject=" + encodeURIComponent("Bad-Kalkulation (unverbindlich)") +
        "&body=" + encodeURIComponent(summary);

      app.innerHTML = `
        <div class="result">
          <h3>Preisinformation</h3>
          <div class="hint">Orientierungswerte auf Basis deiner Auswahl.</div>

          <div class="rows">
            ${Object.entries(parts).map(([k,v]) => `
              <div class="row"><div>${k}</div><div><b>${formatEUR(v)}</b></div></div>
            `).join("")}
            <div class="row"><div>MwSt.</div><div><b>${formatEUR(vat)}</b></div></div>
          </div>

          <div class="total">Summe Total (mit MwSt.): ${formatEUR(gross)}</div>

          <div class="cta">
            <a class="ghost" href="${mailHref}">Ergebnis per E-Mail</a>
            <a class="primary" href="#" id="copyBtn">Ergebnis kopieren</a>
          </div>
        </div>
      `;

      document.getElementById("copyBtn").addEventListener("click", async (e) => {
        e.preventDefault();
        try{
          await navigator.clipboard.writeText(summary);
          alert("Ergebnis kopiert.");
        }catch{
          alert("Kopieren nicht möglich. Bitte manuell übernehmen.");
        }
      });

      return;
    }

    const gridClass = s.cols === 3 ? "grid cols-3" : "grid";

    app.innerHTML = `
      <div class="question">${s.question}</div>
      <div class="${gridClass}">
        ${s.options.map(opt => {
          const active = state[s.key] === opt.label ? "active" : "";
          return `
            <div class="opt ${active}" data-val="${opt.label}" role="button" tabindex="0">
              <div class="label">${opt.label}</div>
              <div class="sub">${opt.sub || ""}</div>
            </div>
          `;
        }).join("")}
      </div>
    `;

    function pick(val){
      state[s.key] = val;

      // UI update
      app.querySelectorAll(".opt").forEach(el => el.classList.toggle("active", el.dataset.val === val));

      // Auto-Weiter (ohne extra Button)
      window.setTimeout(() => {
        idx = Math.min(idx + 1, steps.length - 1);
        render();
      }, 180);
    }

    app.querySelectorAll(".opt").forEach(el => {
      el.addEventListener("click", () => pick(el.dataset.val));
      el.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          pick(el.dataset.val);
        }
      });
    });
  }

  backBtn.addEventListener("click", () => {
    idx = Math.max(idx - 1, 0);
    render();
  });

  render();
})();
</script>
</body>
</html>
