<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bad-Budgetrechner | Powered by OSION Solution XR</title>

  <style>
    :root{
      --osion-red:#b11217;
      --osion-red-dark:#8f0f14;
      --ink:#0b0b0f;
      --muted:#6b7280;
      --bg:#06060a;
      --shadow: 0 26px 80px rgba(0,0,0,.45);
      --radius: 22px;
      --hero-bg: none;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color: #eef2ff;
      background:
        radial-gradient(1100px 560px at 20% -10%, rgba(177,18,23,.22), transparent 60%),
        radial-gradient(900px 520px at 95% 0%, rgba(143,15,20,.20), transparent 55%),
        radial-gradient(900px 520px at 50% 110%, rgba(255,255,255,.07), transparent 55%),
        var(--bg);
    }

    .wrap{max-width:1080px;margin:34px auto;padding:0 16px;}

    .shell{
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
    }

    .hero{
      position:relative;
      height: 220px;
      background:#111;
      background-image: var(--hero-bg);
      background-size: cover;
      background-position: center;
    }

    .hero::before{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(90deg, rgba(0,0,0,.72) 0%, rgba(0,0,0,.34) 55%, rgba(0,0,0,.60) 100%),
        radial-gradient(600px 260px at 20% 30%, rgba(177,18,23,.30), transparent 65%),
        radial-gradient(520px 240px at 78% 28%, rgba(143,15,20,.22), transparent 62%);
      pointer-events:none;
    }

    .hero::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, transparent 55%, rgba(0,0,0,.42) 100%);
      pointer-events:none;
    }

    .hero-inner{
      position:relative;
      height:100%;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 14px;
      padding: 18px 22px;
      z-index:1;
    }

    .left{
      display:flex;
      gap:14px;
      align-items:flex-end;
      max-width: 760px;
    }

    .logo{
      width:56px;
      height:56px;
      border-radius:14px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
    }
    .logo img{
      width: 44px;
      height: 44px;
      object-fit: contain;
      display:block;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
    }

    .brand{display:flex;flex-direction:column;gap:6px;line-height:1.05;}
    .kicker{font-size:12px;letter-spacing:.16em;text-transform:uppercase;opacity:.92;}
    .title{font-size:30px;font-weight:950;letter-spacing:-.03em;text-shadow:0 12px 30px rgba(0,0,0,.55);}

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      color:#fff;
      font-weight:850;
      font-size:12px;
      white-space:nowrap;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: linear-gradient(135deg, var(--osion-red-dark), var(--osion-red));
      box-shadow: 0 0 0 6px rgba(177,18,23,.15);
    }

    .content{padding:18px 22px;background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));}
    .toprow{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:14px;}
    .hint{color:rgba(255,255,255,.78);font-size:13px;}
    .progress{width:320px;height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,.14);}
    .bar{height:100%;width:0%;background: linear-gradient(90deg, #000 0%, var(--osion-red-dark) 58%, var(--osion-red) 100%);transition: width .25s ease;}

    .panel{margin-top:12px;border-radius:18px;background: rgba(255,255,255,.06);border: 1px solid rgba(255,255,255,.12);padding:16px;}
    .question{font-size:16px;font-weight:900;margin:2px 0 14px 0;letter-spacing:-.01em;}

    .grid{display:grid;grid-template-columns: repeat(2, minmax(0,1fr));gap:14px;}
    .grid.cols-3{grid-template-columns: repeat(3, minmax(0,1fr))}
    @media (max-width: 900px){ .grid.cols-3{grid-template-columns:1fr} }
    @media (max-width: 760px){
      .grid{grid-template-columns:1fr}
      .progress{width:100%}
      .hero{height: 200px}
      .title{font-size:24px}
    }

    .opt{
      border-radius: 16px;
      padding: 14px 14px;
      background: rgba(255,255,255,.92);
      color: #0b0b0f;
      border: 1px solid rgba(0,0,0,.08);
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
      min-height: 86px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap: 6px;
      user-select:none;
      position:relative;
      overflow:hidden;
    }
    .opt::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(320px 160px at 30% 0%, rgba(177,18,23,.18), transparent 55%);
      opacity:0;
      transition: opacity .16s ease;
      pointer-events:none;
    }
    .opt:hover{transform: translateY(-1px);box-shadow: 0 18px 40px rgba(0,0,0,.18);}
    .opt:hover::before{opacity:1}
    .opt.active{border-color: rgba(177,18,23,.85);box-shadow: 0 22px 52px rgba(177,18,23,.22);}
    .opt .label{font-weight:950;letter-spacing:-.01em;font-size:14px;}
    .opt .sub{color: rgba(11,11,15,.70);font-size:12px;line-height:1.25;}

    .nav{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:16px;padding-top:14px;border-top:1px solid rgba(255,255,255,.10);}
    .btn{border:0;padding:11px 14px;border-radius:14px;font-weight:900;cursor:pointer;}
    .btn.back{background: rgba(255,255,255,.12);border: 1px solid rgba(255,255,255,.16);color:#fff;backdrop-filter: blur(10px);}
    .btn.back:disabled{opacity:.35;cursor:not-allowed}
    .stepHint{color: rgba(255,255,255,.70);font-size: 12px;}

    .result{
      border-radius: 18px;
      background: rgba(255,255,255,.92);
      color:#0b0b0f;
      border: 1px solid rgba(0,0,0,.08);
      padding: 16px;
    }
    .result h3{margin:0 0 10px 0;font-weight:950}
    .rows{display:grid;grid-template-columns: 1fr 1fr;gap:10px;margin-top:10px;}
    @media (max-width: 760px){ .rows{grid-template-columns:1fr} }
    .row{background: rgba(255,255,255,.86);border: 1px solid rgba(0,0,0,.08);border-radius: 14px;padding: 10px 12px;display:flex;justify-content:space-between;gap: 10px;font-size: 13px;}
    .total{margin-top:12px;font-size:18px;font-weight:950;display:flex;justify-content:flex-end;}

    .cta{margin-top:12px;display:flex;justify-content:flex-end;gap:10px;flex-wrap:wrap;}
    .cta a{text-decoration:none;display:inline-block;padding:11px 14px;border-radius:14px;font-weight:950;font-size:13px;}
    .cta .primary{background: linear-gradient(135deg, var(--osion-red-dark), var(--osion-red));color:#fff;box-shadow: 0 18px 40px rgba(177,18,23,.25);}
    .cta .ghost{background: rgba(15,15,20,.92);color:#fff;}

    .footer{padding:0 22px 18px 22px;color: rgba(255,255,255,.65);font-size: 12px;text-align:center;}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="shell" id="shell">

      <div class="hero">
        <div class="hero-inner">
          <div class="left">
            <div class="logo">
              <img id="osionLogo" alt="OSION Solution XR" />
            </div>
            <div class="brand">
              <div class="kicker">Powered by OSION Solution XR</div>
              <div class="title">Interaktiver Bad-Budgetrechner</div>
            </div>
          </div>
          <div class="badge"><span class="dot"></span><span>Unverbindlich</span></div>
        </div>
      </div>

      <div class="content">
        <div class="toprow">
          <div class="hint">Unverbindliche Kostenschätzung auf Basis deiner Auswahl.</div>
          <div class="progress"><div class="bar" id="bar"></div></div>
        </div>

        <div class="panel">
          <div id="app"></div>

          <div class="nav">
            <button class="btn back" id="backBtn" type="button">Zurück</button>
            <div class="stepHint" id="stepHint"></div>
          </div>
        </div>
      </div>

      <div class="footer">
        © OSION Solution XR – Unverbindliche Kostenschätzung. Keine Preisgarantie.
      </div>
    </div>
  </div>

<script>
(() => {
  // =========================
  // ASSETS / LINKS (HIER passt du nur Dateinamen/Link an)
  // =========================

  // Das ist DEIN aktueller Dateiname im Repo – mit %20 für Leerzeichen:
  const OSION_LOGO_FILE = "MGU-0015%20Logo%20OSION%20Solution%20XR.png";

  // Header-Hintergrund: wir nutzen einfach das gleiche Bild wie Hintergrund (du kannst später ein anderes nehmen)
  const HEADER_BG_FILE = OSION_LOGO_FILE;

  // Optional: Kontakt-Link (wenn leer, kein Kontaktbutton)
  const CONTACT_URL = ""; // z.B. "https://kunde.de/kontakt"

  // Assets anwenden
  document.getElementById("shell").style.setProperty("--hero-bg", `url("${HEADER_BG_FILE}")`);
  document.getElementById("osionLogo").src = OSION_LOGO_FILE;

  // =========================
  // PREISE / LOGIK
  // =========================
  const VAT = 0.19;

  const PRICES = {
    baseByAreaNet: {
      "4-5 qm": 14500,
      "5-7 qm": 17500,
      "7-10 qm": 22000,
      ">10 qm": 27500
    },
    qualityFactor: { "Basic": 0.85, "Komfort": 1.00, "Luxus": 1.28 },
    tubFactor: { "Dusche": 1.00, "Badewanne": 1.06, "Dusche und Badewanne": 1.14 }
  };

  const breakdownWeights = {
    "Demontage / Montage / Installation": 0.34,
    "Malerarbeiten": 0.06,
    "Fliesenarbeiten / Fliesen": 0.22,
    "Elektroarbeiten": 0.08,
    "Ausstattung": 0.30
  };

  const steps = [
    {
      key: "area",
      question: "Wie groß ist Ihr Bad?",
      cols: 2,
      options: [
        { label: "4-5 qm", sub: "Kompaktbad / Standard" },
        { label: "5-7 qm", sub: "Typisches Familienbad" },
        { label: "7-10 qm", sub: "Komfortgröße" },
        { label: ">10 qm", sub: "Großes Bad" }
      ]
    },
    {
      key: "quality",
      question: "Welche Qualitätsstufe wünschen Sie?",
      cols: 3,
      options: [
        { label: "Basic", sub: "Preisbewusst, solide Auswahl" },
        { label: "Komfort", sub: "Mittelklasse, typischer Standard" },
        { label: "Luxus", sub: "Hochwertige Materialien & Ausstattung" }
      ]
    },
    {
      key: "tub",
      question: "Dusche und/oder Badewanne?",
      cols: 3,
      options: [
        { label: "Dusche", sub: "Modern & effizient" },
        { label: "Badewanne", sub: "Entspannung & Komfort" },
        { label: "Dusche und Badewanne", sub: "Maximaler Komfort" }
      ]
    },
    { key: "result" }
  ];

  const state = { area: null, quality: null, tub: null };
  let idx = 0;

  const app = document.getElementById("app");
  const bar = document.getElementById("bar");
  const backBtn = document.getElementById("backBtn");
  const stepHint = document.getElementById("stepHint");

  function formatEUR(v){
    return v.toLocaleString("de-DE", { style:"currency", currency:"EUR" });
  }

  function calcNet(){
    const base = PRICES.baseByAreaNet[state.area] ?? 0;
    const q = PRICES.qualityFactor[state.quality] ?? 1;
    const t = PRICES.tubFactor[state.tub] ?? 1;
    return Math.round(base * q * t);
  }

  function breakdown(net){
    const out = {};
    for (const [k,w] of Object.entries(breakdownWeights)){
      out[k] = Math.round(net * w);
    }
    return out;
  }

  function setProgress(){
    const p = Math.round((idx / (steps.length - 1)) * 100);
    bar.style.width = p + "%";
  }

  function render(){
    setProgress();

    backBtn.disabled = idx === 0;
    stepHint.textContent = idx < steps.length - 1 ? `Schritt ${idx+1} von ${steps.length-1}` : "";

    const s = steps[idx];

    if (s.key === "result"){
      const net = calcNet();
      const vat = Math.round(net * VAT);
      const gross = net + vat;
      const parts = breakdown(net);

      const summary =
        `Bad-Kalkulation (unverbindlich)\n` +
        `Fläche: ${state.area}\n` +
        `Qualität: ${state.quality}\n` +
        `Dusche/Badewanne: ${state.tub}\n\n` +
        `Summe (netto): ${formatEUR(net)}\n` +
        `MwSt.: ${formatEUR(vat)}\n` +
        `Summe (brutto): ${formatEUR(gross)}\n`;

      const mailHref =
        "mailto:?subject=" + encodeURIComponent("Bad-Kalkulation (unverbindlich)") +
        "&body=" + encodeURIComponent(summary);

      app.innerHTML = `
        <div class="result">
          <h3>Preisinformation</h3>
          <div style="color:rgba(11,11,15,.70);font-size:13px;line-height:1.35">
            Orientierungswerte auf Basis deiner Auswahl.
          </div>

          <div class="rows">
            ${Object.entries(parts).map(([k,v]) => `
              <div class="row"><div>${k}</div><div><b>${formatEUR(v)}</b></div></div>
            `).join("")}
            <div class="row"><div>MwSt.</div><div><b>${formatEUR(vat)}</b></div></div>
          </div>

          <div class="total">Summe Total (mit MwSt.): ${formatEUR(gross)}</div>

          <div class="cta">
            <a class="ghost" href="${mailHref}">Ergebnis per E-Mail</a>
            <a class="ghost" href="#" id="copyBtn">Ergebnis kopieren</a>
            ${CONTACT_URL ? `<a class="primary" href="${CONTACT_URL}" target="_blank" rel="noopener">Zum Kontaktformular</a>` : ``}
          </div>
        </div>
      `;

      document.getElementById("copyBtn").addEventListener("click", async (e) => {
        e.preventDefault();
        try{
          await navigator.clipboard.writeText(summary);
          alert("Ergebnis kopiert.");
        }catch{
          alert("Kopieren nicht möglich. Bitte manuell übernehmen.");
        }
      });

      return;
    }

    const gridClass = s.cols === 3 ? "grid cols-3" : "grid";

    app.innerHTML = `
      <div class="question">${s.question}</div>
      <div class="${gridClass}">
        ${s.options.map(opt => {
          const active = state[s.key] === opt.label ? "active" : "";
          return `
            <div class="opt ${active}" data-val="${opt.label}" role="button" tabindex="0">
              <div class="label">${opt.label}</div>
              <div class="sub">${opt.sub || ""}</div>
            </div>
          `;
        }).join("")}
      </div>
    `;

    function pick(val){
      state[s.key] = val;
      app.querySelectorAll(".opt").forEach(el => el.classList.toggle("active", el.dataset.val === val));

      // Auto-Weiter
      window.setTimeout(() => {
        idx = Math.min(idx + 1, steps.length - 1);
        render();
      }, 140);
    }

    app.querySelectorAll(".opt").forEach(el => {
      el.addEventListener("click", () => pick(el.dataset.val));
      el.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          pick(el.dataset.val);
        }
      });
    });
  }

  backBtn.addEventListener("click", () => {
    idx = Math.max(idx - 1, 0);
    render();
  });

  render();
})();
</script>
</body>
</html>
